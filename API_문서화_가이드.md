# FastAPI λ°±μ—”λ“ API λ¬Έμ„ν™” κ°€μ΄λ“

λ³Έ λ¬Έμ„λ” μΊ΅μ¤ν†¤ λ””μμΈ μµμΆ…λ³΄κ³ μ„ μ‘μ„±μ„ μ„ν• API μ½”λ“ μ¤ν¬λ¦°μƒ· κ°€μ΄λ“μ…λ‹λ‹¤.

## π“‹ λ©μ°¨

1. [μΈμ¦ API (Authentication API)](#1-μΈμ¦-api-authentication-api)
2. [λ€ν™” κ΄€λ¦¬ API (Conversations API)](#2-λ€ν™”-κ΄€λ¦¬-api-conversations-api)
3. [λ©”μΈ μ• ν”λ¦¬μΌ€μ΄μ… μ„¤μ •](#3-λ©”μΈ-μ• ν”λ¦¬μΌ€μ΄μ…-μ„¤μ •)
4. [HyperCLOVA API ν΄λΌμ΄μ–ΈνΈ](#4-hyperclova-api-ν΄λΌμ΄μ–ΈνΈ)

---

## 1. μΈμ¦ API (Authentication API)

**νμΌ μ„μΉ**: `backend/api/auth.py`

### 1.1 μ΄λ©”μΌ μΈμ¦ μ”μ²­
- **μ—”λ“ν¬μΈνΈ**: `POST /api/auth/send-verification-email`
- **μ„¤λ…**: νμ›κ°€μ… μ „ μ΄λ©”μΌ μΈμ¦ μ½”λ“λ¥Ό λ°μ†΅ν•λ” API
- **μ£Όμ” κΈ°λ¥**:
  - λ°±μ„λ€ν•™κµ μ΄λ©”μΌ(@bu.ac.kr) κ²€μ¦
  - μ¤‘λ³µ μ΄λ©”μΌ ν™•μΈ
  - 6μλ¦¬ μΈμ¦ μ½”λ“ μƒμ„± λ° μ΄λ©”μΌ λ°μ†΅
  - 30λ¶„ λ§λ£ μ‹κ°„ μ„¤μ •
- **μ¤ν¬λ¦°μƒ· ν¬ν•¨ λ²”μ„**: 
  - `backend/api/auth.py` λΌμΈ 28-94 (ν•¨μ μ „μ²΄)
  - νΉν `backend/api/auth.py` λΌμΈ 42-77 (λΉ„μ¦λ‹μ¤ λ΅μ§ λ¶€λ¶„)

### 1.2 μ΄λ©”μΌ μΈμ¦ ν™•μΈ
- **μ—”λ“ν¬μΈνΈ**: `POST /api/auth/verify-email`
- **μ„¤λ…**: μ΄λ©”μΌλ΅ λ°›μ€ μΈμ¦ μ½”λ“λ¥Ό ν™•μΈν•λ” API
- **μ£Όμ” κΈ°λ¥**:
  - μΈμ¦ μ½”λ“ κ²€μ¦
  - λ§λ£ μ‹κ°„ ν™•μΈ
  - μΈμ¦ μ™„λ£ μƒνƒ μ—…λ°μ΄νΈ
- **μ¤ν¬λ¦°μƒ· ν¬ν•¨ λ²”μ„**: 
  - `backend/api/auth.py` λΌμΈ 97-154 (ν•¨μ μ „μ²΄)
  - νΉν `backend/api/auth.py` λΌμΈ 112-137 (κ²€μ¦ λ΅μ§ λ¶€λ¶„)

### 1.3 νμ›κ°€μ…
- **μ—”λ“ν¬μΈνΈ**: `POST /api/auth/signup`
- **μ„¤λ…**: μƒλ΅μ΄ μ‚¬μ©μλ¥Ό λ“±λ΅ν•λ” API
- **μ£Όμ” κΈ°λ¥**:
  - μ΄λ©”μΌ μΈμ¦ μ—¬λ¶€ ν™•μΈ
  - μ¤‘λ³µ μ΄λ©”μΌ ν™•μΈ
  - λΉ„λ°€λ²νΈ ν•΄μ‹± (bcrypt)
  - μ‚¬μ©μ μ •λ³΄ MongoDB μ €μ¥
- **μ¤ν¬λ¦°μƒ· ν¬ν•¨ λ²”μ„**: 
  - `backend/api/auth.py` λΌμΈ 157-261 (ν•¨μ μ „μ²΄)
  - νΉν `backend/api/auth.py` λΌμΈ 176-243 (νμ›κ°€μ… μ²λ¦¬ λ΅μ§)

### 1.4 λ΅κ·ΈμΈ
- **μ—”λ“ν¬μΈνΈ**: `POST /api/auth/login`
- **μ„¤λ…**: μ‚¬μ©μ μΈμ¦ ν›„ JWT ν† ν°μ„ λ°κΈ‰ν•λ” API
- **μ£Όμ” κΈ°λ¥**:
  - μ΄λ©”μΌ/λΉ„λ°€λ²νΈ κ²€μ¦
  - JWT Access Token λ° Refresh Token λ°κΈ‰
  - μ‚¬μ©μ μ •λ³΄ λ°ν™
- **μ¤ν¬λ¦°μƒ· ν¬ν•¨ λ²”μ„**: 
  - `backend/api/auth.py` λΌμΈ 264-356 (ν•¨μ μ „μ²΄)
  - νΉν `backend/api/auth.py` λΌμΈ 314-338 (ν† ν° μƒμ„± λ° μ‘λ‹µ λ¶€λ¶„)

### 1.5 λΉ„λ°€λ²νΈ μ¬μ„¤μ • μ”μ²­
- **μ—”λ“ν¬μΈνΈ**: `POST /api/auth/password-reset/request`
- **μ„¤λ…**: λ“±λ΅λ μ΄λ©”μΌλ΅ λΉ„λ°€λ²νΈ μ¬μ„¤μ • μΈμ¦ μ½”λ“λ¥Ό λ°μ†΅ν•λ” API
- **μ£Όμ” κΈ°λ¥**:
  - λ“±λ΅λ μ΄λ©”μΌ ν™•μΈ
  - λΉ„λ°€λ²νΈ μ¬μ„¤μ • μ½”λ“ μƒμ„± λ° λ°μ†΅
  - κΈ°μ΅΄ μ½”λ“ μ‚­μ  ν›„ μƒ μ½”λ“ μ €μ¥
- **μ¤ν¬λ¦°μƒ· ν¬ν•¨ λ²”μ„**: 
  - `backend/api/auth.py` λΌμΈ 359-443 (ν•¨μ μ „μ²΄)
  - νΉν `backend/api/auth.py` λΌμΈ 392-426 (μ½”λ“ μƒμ„± λ° λ°μ†΅ λ¶€λ¶„)

### 1.6 λΉ„λ°€λ²νΈ μ¬μ„¤μ • ν™•μΈ
- **μ—”λ“ν¬μΈνΈ**: `POST /api/auth/password-reset/confirm`
- **μ„¤λ…**: μΈμ¦ μ½”λ“λ¥Ό ν™•μΈν•κ³  μƒ λΉ„λ°€λ²νΈλ΅ λ³€κ²½ν•λ” API
- **μ£Όμ” κΈ°λ¥**:
  - μΈμ¦ μ½”λ“ κ²€μ¦
  - λ§λ£ μ‹κ°„ ν™•μΈ
  - λΉ„λ°€λ²νΈ ν•΄μ‹± λ° μ—…λ°μ΄νΈ
  - μ‚¬μ©λ ν† ν° μ‚­μ 
- **μ¤ν¬λ¦°μƒ· ν¬ν•¨ λ²”μ„**: 
  - `backend/api/auth.py` λΌμΈ 446-553 (ν•¨μ μ „μ²΄)
  - νΉν `backend/api/auth.py` λΌμΈ 465-536 (λΉ„λ°€λ²νΈ λ³€κ²½ λ΅μ§)

### 1.7 Access Token κ°±μ‹ 
- **μ—”λ“ν¬μΈνΈ**: `POST /api/auth/refresh`
- **μ„¤λ…**: Refresh Tokenμ„ μ‚¬μ©ν•μ—¬ μƒλ΅μ΄ Access Tokenμ„ λ°κΈ‰λ°›λ” API
- **μ£Όμ” κΈ°λ¥**:
  - Refresh Token κ²€μ¦
  - ν† ν° νƒ€μ… ν™•μΈ
  - μ‚¬μ©μ μ΅΄μ¬ μ—¬λ¶€ ν™•μΈ
  - μƒ Access Token λ°κΈ‰
- **μ¤ν¬λ¦°μƒ· ν¬ν•¨ λ²”μ„**: 
  - `backend/api/auth.py` λΌμΈ 556-664 (ν•¨μ μ „μ²΄)
  - νΉν `backend/api/auth.py` λΌμΈ 570-647 (ν† ν° κ°±μ‹  λ΅μ§)

---

## 2. λ€ν™” κ΄€λ¦¬ API (Conversations API)

**νμΌ μ„μΉ**: `backend/api/conversations.py`

### 2.1 μƒ λ€ν™” μƒμ„±
- **μ—”λ“ν¬μΈνΈ**: `POST /api/conversations`
- **μ„¤λ…**: μƒλ΅μ΄ λ€ν™”λ°©μ„ μƒμ„±ν•λ” API
- **μ£Όμ” κΈ°λ¥**:
  - μ‚¬μ©μ μΈμ¦ ν™•μΈ (JWT)
  - λ€ν™” μ λ© μ„¤μ • (κΈ°λ³Έκ°’: "μƒ λ€ν™”")
  - MongoDBμ— λ€ν™” μ •λ³΄ μ €μ¥
- **μ¤ν¬λ¦°μƒ· ν¬ν•¨ λ²”μ„**: 
  - `backend/api/conversations.py` λΌμΈ 32-69 (ν•¨μ μ „μ²΄)
  - νΉν `backend/api/conversations.py` λΌμΈ 49-62 (λ€ν™” μƒμ„± λ° μ‘λ‹µ λ¶€λ¶„)

### 2.2 λ€ν™” λ©λ΅ μ΅°ν
- **μ—”λ“ν¬μΈνΈ**: `GET /api/conversations`
- **μ„¤λ…**: μ‚¬μ©μμ λ¨λ“  λ€ν™”λ¥Ό μµμ‹ μμΌλ΅ μ΅°νν•λ” API
- **μ£Όμ” κΈ°λ¥**:
  - μ‚¬μ©μ μΈμ¦ ν™•μΈ
  - ν•΄λ‹Ή μ‚¬μ©μμ λ¨λ“  λ€ν™” μ΅°ν
  - μµμ‹ μ μ •λ ¬
- **μ¤ν¬λ¦°μƒ· ν¬ν•¨ λ²”μ„**: 
  - `backend/api/conversations.py` λΌμΈ 72-100 (ν•¨μ μ „μ²΄)
  - νΉν `backend/api/conversations.py` λΌμΈ 85-93 (μ΅°ν λ° μ‘λ‹µ λ¶€λ¶„)

### 2.3 νΉμ • λ€ν™” μ΅°ν
- **μ—”λ“ν¬μΈνΈ**: `GET /api/conversations/{conversation_id}`
- **μ„¤λ…**: νΉμ • λ€ν™”μ μƒμ„Έ μ •λ³΄λ¥Ό μ΅°νν•λ” API
- **μ£Όμ” κΈ°λ¥**:
  - λ€ν™” ID κ²€μ¦
  - μ‚¬μ©μ κ¶ν• ν™•μΈ (λ³ΈμΈ λ€ν™”λ§ μ΅°ν κ°€λ¥)
  - λ€ν™” μƒμ„Έ μ •λ³΄ λ°ν™
- **μ¤ν¬λ¦°μƒ· ν¬ν•¨ λ²”μ„**: 
  - `backend/api/conversations.py` λΌμΈ 103-142 (ν•¨μ μ „μ²΄)
  - νΉν `backend/api/conversations.py` λΌμΈ 117-125 (μ΅°ν λ° μ‘λ‹µ λ¶€λ¶„)

### 2.4 λ€ν™” μ‚­μ 
- **μ—”λ“ν¬μΈνΈ**: `DELETE /api/conversations/{conversation_id}`
- **μ„¤λ…**: λ€ν™” λ° λ¨λ“  λ©”μ‹μ§€λ¥Ό μ‚­μ ν•λ” API
- **μ£Όμ” κΈ°λ¥**:
  - λ€ν™” ID κ²€μ¦
  - μ‚¬μ©μ κ¶ν• ν™•μΈ
  - λ€ν™” λ° κ΄€λ ¨ λ©”μ‹μ§€ μ‚­μ 
- **μ¤ν¬λ¦°μƒ· ν¬ν•¨ λ²”μ„**: 
  - `backend/api/conversations.py` λΌμΈ 145-184 (ν•¨μ μ „μ²΄)
  - νΉν `backend/api/conversations.py` λΌμΈ 159-167 (μ‚­μ  μ²λ¦¬ λ¶€λ¶„)

### 2.5 λ©”μ‹μ§€ λ©λ΅ μ΅°ν
- **μ—”λ“ν¬μΈνΈ**: `GET /api/conversations/{conversation_id}/messages`
- **μ„¤λ…**: νΉμ • λ€ν™”μ λ¨λ“  λ©”μ‹μ§€λ¥Ό μμ„λ€λ΅ μ΅°νν•λ” API
- **μ£Όμ” κΈ°λ¥**:
  - λ€ν™” ID κ²€μ¦
  - μ‚¬μ©μ κ¶ν• ν™•μΈ
  - λ©”μ‹μ§€ λ©λ΅ μ΅°ν (μμ„λ€λ΅)
- **μ¤ν¬λ¦°μƒ· ν¬ν•¨ λ²”μ„**: 
  - `backend/api/conversations.py` λΌμΈ 187-229 (ν•¨μ μ „μ²΄)
  - νΉν `backend/api/conversations.py` λΌμΈ 201-212 (μ΅°ν λ° μ‘λ‹µ λ¶€λ¶„)

### 2.6 λ€ν™”λ°©μ— λ©”μ‹μ§€ μ¶”κ°€ (RESTful)
- **μ—”λ“ν¬μΈνΈ**: `POST /api/conversations/{conversation_id}/messages`
- **μ„¤λ…**: νΉμ • λ€ν™”λ°©μ— λ©”μ‹μ§€λ¥Ό μ¶”κ°€ν•κ³  AI μ‘λ‹µμ„ λ°›λ” API
- **μ£Όμ” κΈ°λ¥**:
  - μ‚¬μ©μ λ©”μ‹μ§€ μ €μ¥
  - AI μ±—λ΄‡ μ‘λ‹µ μƒμ„±
  - λ²΅ν„° κ²€μƒ‰μ„ ν†µν• μ»¨ν…μ¤νΈ μ κ³µ
  - μ‘λ‹µ λ©”μ‹μ§€ μ €μ¥
- **μ¤ν¬λ¦°μƒ· ν¬ν•¨ λ²”μ„**: 
  - `backend/api/conversations.py` λΌμΈ 232-278 (ν•¨μ μ „μ²΄)
  - νΉν `backend/api/conversations.py` λΌμΈ 249-261 (λ©”μ‹μ§€ μ²λ¦¬ λ° μ‘λ‹µ λ¶€λ¶„)

### 2.7 μ±„ν…ν•κΈ° (μλ™ λ€ν™”λ°© μƒμ„±)
- **μ—”λ“ν¬μΈνΈ**: `POST /api/conversations/chat`
- **μ„¤λ…**: conversation_idκ°€ μ—†μΌλ©΄ μλ™μΌλ΅ μƒ λ€ν™”λ°©μ„ μƒμ„±ν•λ” API
- **μ£Όμ” κΈ°λ¥**:
  - conversation_idκ°€ μ—†μΌλ©΄ μλ™ μƒμ„±
  - conversation_idκ°€ μμΌλ©΄ ν•΄λ‹Ή λ€ν™”λ°©μ— λ©”μ‹μ§€ μ¶”κ°€
  - AI μ±—λ΄‡ μ‘λ‹µ μƒμ„±
- **μ¤ν¬λ¦°μƒ· ν¬ν•¨ λ²”μ„**: 
  - `backend/api/conversations.py` λΌμΈ 281-339 (ν•¨μ μ „μ²΄)
  - νΉν `backend/api/conversations.py` λΌμΈ 299-322 (μλ™ μƒμ„± λ° μ±„ν… μ²λ¦¬ λ¶€λ¶„)

---

## 3. λ©”μΈ μ• ν”λ¦¬μΌ€μ΄μ… μ„¤μ •

**νμΌ μ„μΉ**: `backend/main.py`

### 3.1 FastAPI μ• ν”λ¦¬μΌ€μ΄μ… μ΄κΈ°ν™”
- **μ„¤λ…**: FastAPI μ• ν”λ¦¬μΌ€μ΄μ…μ λ©”μΈ μ„¤μ • νμΌ
- **μ£Όμ” κΈ°λ¥**:
  - FastAPI μ•± μƒμ„± λ° μ„¤μ •
  - CORS λ―Έλ“¤μ›¨μ–΄ μ„¤μ •
  - λ³΄μ• λ―Έλ“¤μ›¨μ–΄ μ„¤μ • (TrustedHost)
  - μμ™Έ ν•Έλ“¤λ¬ μ„¤μ •
  - API λΌμ°ν„° λ“±λ΅
  - MongoDB μ—°κ²° μ΄λ²¤νΈ
- **μ¤ν¬λ¦°μƒ· ν¬ν•¨ λ²”μ„**: 
  - `backend/main.py` λΌμΈ 26-34 (FastAPI μ•± μƒμ„±)
  - `backend/main.py` λΌμΈ 36-65 (λ―Έλ“¤μ›¨μ–΄ μ„¤μ •)
  - `backend/main.py` λΌμΈ 72-113 (μμ™Έ ν•Έλ“¤λ¬)
  - `backend/main.py` λΌμΈ 115-118 (λΌμ°ν„° λ“±λ΅)
  - `backend/main.py` λΌμΈ 121-137 (μ‹μ‘ μ΄λ²¤νΈ)

### 3.2 λ£¨νΈ μ—”λ“ν¬μΈνΈ
- **μ—”λ“ν¬μΈνΈ**: `GET /api/`
- **μ„¤λ…**: μ• ν”λ¦¬μΌ€μ΄μ… μƒνƒ ν™•μΈ μ—”λ“ν¬μΈνΈ
- **μ¤ν¬λ¦°μƒ· ν¬ν•¨ λ²”μ„**: 
  - `backend/main.py` λΌμΈ 140-147 (ν•¨μ μ „μ²΄)

### 3.3 ν—¬μ¤ μ²΄ν¬ μ—”λ“ν¬μΈνΈ
- **μ—”λ“ν¬μΈνΈ**: `GET /api/health`
- **μ„¤λ…**: μ‹¤μ  μμ΅΄μ„± μ—°κ²° μƒνƒλ¥Ό ν™•μΈν•λ” μ—”λ“ν¬μΈνΈ
- **μ£Όμ” κΈ°λ¥**:
  - Pinecone μ—°κ²° μƒνƒ ν™•μΈ
  - HyperCLOVA API ν‚¤ ν™•μΈ
  - μ „μ²΄ μ‹μ¤ν… μƒνƒ λ°ν™
- **μ¤ν¬λ¦°μƒ· ν¬ν•¨ λ²”μ„**: 
  - `backend/main.py` λΌμΈ 149-213 (ν•¨μ μ „μ²΄)
  - νΉν `backend/main.py` λΌμΈ 159-213 (ν—¬μ¤ μ²΄ν¬ λ΅μ§)

### 3.4 λ©”νΈλ¦­ μ—”λ“ν¬μΈνΈ
- **μ—”λ“ν¬μΈνΈ**: `GET /api/metrics`
- **μ„¤λ…**: μ‹μ¤ν… λ©”νΈλ¦­ μ •λ³΄λ¥Ό λ°ν™ν•λ” μ—”λ“ν¬μΈνΈ
- **μ¤ν¬λ¦°μƒ· ν¬ν•¨ λ²”μ„**: 
  - `backend/main.py` λΌμΈ 215-225 (ν•¨μ μ „μ²΄)

---

## 4. HyperCLOVA API ν΄λΌμ΄μ–ΈνΈ

**νμΌ μ„μΉ**: `backend/domain/chat/client.py`

### 4.1 HyperCLOVA ν΄λΌμ΄μ–ΈνΈ μ΄κΈ°ν™”
- **μ„¤λ…**: HyperCLOVA X APIλ¥Ό νΈμ¶ν•κΈ° μ„ν• ν΄λΌμ΄μ–ΈνΈ ν΄λμ¤
- **μ£Όμ” κΈ°λ¥**:
  - HyperCLOVA X v3 API μ—”λ“ν¬μΈνΈ μ„¤μ •
  - API ν‚¤ λ° μΈμ¦ ν—¤λ” κ΄€λ¦¬
  - λΉ„λ™κΈ° HTTP ν΄λΌμ΄μ–ΈνΈ κ΄€λ¦¬
  - μ—°κ²° ν’€ λ° νƒ€μ„μ•„μ›ƒ μ„¤μ •
- **μ¤ν¬λ¦°μƒ· ν¬ν•¨ λ²”μ„**: 
  - `backend/domain/chat/client.py` λΌμΈ 19-60 (ν΄λμ¤ μ •μ λ° μ΄κΈ°ν™”)
  - νΉν `backend/domain/chat/client.py` λΌμΈ 27-60 (μ΄κΈ°ν™” λ° ν΄λΌμ΄μ–ΈνΈ μ„¤μ •)

### 4.2 κΈ°λ³Έ μ±„ν… API νΈμ¶
- **λ©”μ„λ“**: `chat()`
- **μ„¤λ…**: HyperCLOVA X v3 Chat Completions APIλ¥Ό νΈμ¶ν•λ” ν•µμ‹¬ λ©”μ„λ“
- **μ£Όμ” κΈ°λ¥**:
  - λ©”μ‹μ§€λ¥Ό v3 API ν•μ‹μΌλ΅ λ³€ν™
  - μ¬μ‹λ„ λ΅μ§ (μµλ€ 3ν)
  - μ§€μ λ°±μ¤ν”„ (exponential backoff)
  - λ‹¤μ–‘ν• μƒμ„± νλΌλ―Έν„° μ§€μ› (temperature, top_p, top_k λ“±)
  - μ—λ¬ μ²λ¦¬ λ° λ΅κΉ…
- **μ£Όμ” νλΌλ―Έν„°**:
  - `messages`: λ€ν™” λ©”μ‹μ§€ λ¦¬μ¤νΈ
  - `max_tokens`: μµλ€ μƒμ„± ν† ν° μ
  - `temperature`: μƒμ„± λ‹¤μ–‘μ„± (0.00~1.00)
  - `top_p`, `top_k`: μƒν”λ§ νλΌλ―Έν„°
  - `repetition_penalty`: λ°λ³µ ν¨λ„ν‹°
- **μ¤ν¬λ¦°μƒ· ν¬ν•¨ λ²”μ„**: 
  - `backend/domain/chat/client.py` λΌμΈ 102-205 (ν•¨μ μ „μ²΄)
  - νΉν `backend/domain/chat/client.py` λΌμΈ 131-171 (API νΈμ¶ λ΅μ§)
  - `backend/domain/chat/client.py` λΌμΈ 173-205 (μ—λ¬ μ²λ¦¬ λ° μ¬μ‹λ„ λ΅μ§)

### 4.3 μλ„ λ¶„λ¥ (Intent Classification)
- **λ©”μ„λ“**: `classify_intent()`
- **μ„¤λ…**: μ‚¬μ©μ μ§λ¬Έμ μλ„λ¥Ό λ¶„λ¥ν•λ” λ©”μ„λ“ (μμ—… κ΄€λ ¨ / μΌμƒ λ€ν™”)
- **μ£Όμ” κΈ°λ¥**:
  - μ‹μ¤ν… ν”„λ΅¬ν”„νΈλ¥Ό μ‚¬μ©ν• μλ„ λ¶„λ¥
  - 'course_related' λλ” 'casual_chat' λ°ν™
  - λ‚®μ€ temperatureλ΅ μΌκ΄€λ λ¶„λ¥ κ²°κ³Ό
  - μ—λ¬ μ‹ μ•μ „ν•κ² μμ—… κ΄€λ ¨μΌλ΅ μ²λ¦¬
- **μ¤ν¬λ¦°μƒ· ν¬ν•¨ λ²”μ„**: 
  - `backend/domain/chat/client.py` λΌμΈ 207-255 (ν•¨μ μ „μ²΄)
  - νΉν `backend/domain/chat/client.py` λΌμΈ 217-250 (μλ„ λ¶„λ¥ λ΅μ§)

### 4.4 μ»¨ν…μ¤νΈ κΈ°λ° λ‹µλ³€ μƒμ„±
- **λ©”μ„λ“**: `generate_answer()`
- **μ„¤λ…**: λ²΅ν„° κ²€μƒ‰μΌλ΅ μ°Ύμ€ μ»¨ν…μ¤νΈλ¥Ό κΈ°λ°μΌλ΅ λ‹µλ³€μ„ μƒμ„±ν•λ” λ©”μ„λ“
- **μ£Όμ” κΈ°λ¥**:
  - μ»¨ν…μ¤νΈ λ¬Έμ„λ¥Ό μ‹μ¤ν… ν”„λ΅¬ν”„νΈμ— ν¬ν•¨
  - λ‹΄λ‹Ήκµμ κ΄€λ ¨ μ§λ¬Έ μ‹ "κµκ³Όλ© μ΄μ" μ„Ήμ… μ°μ„  λ°°μΉ
  - λ€ν™” νμ¤ν† λ¦¬ ν¬ν•¨ (μµκ·Ό 3κ° λ©”μ‹μ§€)
  - μ„Ήμ…, κ°•μλ…, λ‹΄λ‹Ήκµμ μ •λ³΄λ¥Ό λ©”νƒ€λ°μ΄ν„°λ΅ ν¬ν•¨
  - HyperCLOVA X v3 μ‘λ‹µ ν•μ‹ νμ‹±
- **μ¤ν¬λ¦°μƒ· ν¬ν•¨ λ²”μ„**: 
  - `backend/domain/chat/client.py` λΌμΈ 257-389 (ν•¨μ μ „μ²΄)
  - νΉν `backend/domain/chat/client.py` λΌμΈ 280-324 (μ»¨ν…μ¤νΈ κµ¬μ„± λ΅μ§)
  - `backend/domain/chat/client.py` λΌμΈ 349-389 (API νΈμ¶ λ° μ‘λ‹µ νμ‹±)

### 4.5 μΌμƒ λ€ν™” λ‹µλ³€ μƒμ„±
- **λ©”μ„λ“**: `generate_casual_answer()`
- **μ„¤λ…**: μ»¨ν…μ¤νΈ μ—†μ΄ μΌμƒ λ€ν™”μ— λ‹µλ³€ν•λ” λ©”μ„λ“
- **μ£Όμ” κΈ°λ¥**:
  - μΌμƒ λ€ν™” μ „μ© μ‹μ¤ν… ν”„λ΅¬ν”„νΈ μ‚¬μ©
  - λ€ν™” νμ¤ν† λ¦¬ ν¬ν•¨
  - λ†’μ€ temperatureλ΅ μμ—°μ¤λ¬μ΄ λ€ν™” μƒμ„±
  - μ—λ¬ μ²λ¦¬ λ° κΈ°λ³Έ μ‘λ‹µ μ κ³µ
- **μ¤ν¬λ¦°μƒ· ν¬ν•¨ λ²”μ„**: 
  - `backend/domain/chat/client.py` λΌμΈ 391-446 (ν•¨μ μ „μ²΄)
  - νΉν `backend/domain/chat/client.py` λΌμΈ 402-446 (μΌμƒ λ€ν™” λ‹µλ³€ μƒμ„± λ΅μ§)

### 4.6 ν—¬νΌ ν•¨μ
- **λ©”μ„λ“**: `get_hyperclova_client()`
- **μ„¤λ…**: HyperCLOVA ν΄λΌμ΄μ–ΈνΈ μ‹±κΈ€ν†¤ μΈμ¤ν„΄μ¤λ¥Ό λ°ν™ν•λ” ν•¨μ
- **μ£Όμ” κΈ°λ¥**:
  - μ „μ—­ ν΄λΌμ΄μ–ΈνΈ μΈμ¤ν„΄μ¤ κ΄€λ¦¬
  - μ‹±κΈ€ν†¤ ν¨ν„΄μΌλ΅ λ¦¬μ†μ¤ ν¨μ¨μ„± ν–¥μƒ
- **μ¤ν¬λ¦°μƒ· ν¬ν•¨ λ²”μ„**: 
  - `backend/domain/chat/client.py` λΌμΈ 504-513 (ν•¨μ μ „μ²΄)

### 4.7 HyperCLOVA μ‚¬μ© μμ‹
- **νμΌ μ„μΉ**: `backend/domain/conversations/service.py`
- **μ„¤λ…**: μ‹¤μ  μ±„ν… λ©”μ‹μ§€ μ²λ¦¬μ—μ„ HyperCLOVAκ°€ μ–΄λ–»κ² μ‚¬μ©λλ”μ§€ λ³΄μ—¬μ£Όλ” μμ‹
- **μ£Όμ” νλ¦„**:
  1. μ‚¬μ©μ μ§λ¬Έ μμ‹ 
  2. `classify_intent()`λ΅ μλ„ λ¶„λ¥
  3. μμ—… κ΄€λ ¨μ΄λ©΄ λ²΅ν„° κ²€μƒ‰ ν›„ `generate_answer()` νΈμ¶
  4. μΌμƒ λ€ν™”λ©΄ `generate_casual_answer()` νΈμ¶
  5. μƒμ„±λ λ‹µλ³€μ„ λ°μ΄ν„°λ² μ΄μ¤μ— μ €μ¥
- **μ¤ν¬λ¦°μƒ· ν¬ν•¨ λ²”μ„**: 
  - `backend/domain/conversations/service.py`μ `process_chat_message()` ν•¨μ
  - νΉν `backend/domain/conversations/service.py` λΌμΈ 100-129 (μλ„ λ¶„λ¥ λ° λ‹µλ³€ μƒμ„± λ¶€λ¶„)

### 4.8 ν—¤λ” λ° λ©”μ‹μ§€ λ³€ν™ μ ν‹Έλ¦¬ν‹°
- **λ©”μ„λ“**: `_build_headers()`, `_convert_messages_to_v3_format()`
- **μ„¤λ…**: API μ”μ²­μ„ μ„ν• ν—¤λ” μƒμ„± λ° λ©”μ‹μ§€ ν•μ‹ λ³€ν™
- **μ£Όμ” κΈ°λ¥**:
  - Authorization ν—¤λ” μƒμ„± (Bearer ν† ν°)
  - Request ID ν—¤λ” μ„¤μ •
  - v3 API ν•μ‹μΌλ΅ λ©”μ‹μ§€ λ³€ν™
- **μ¤ν¬λ¦°μƒ· ν¬ν•¨ λ²”μ„**: 
  - `backend/domain/chat/client.py` λΌμΈ 68-100 (ν—¤λ” λ° λ³€ν™ ν•¨μ)

---

## π“Έ μ¤ν¬λ¦°μƒ· μ΄¬μ κ°€μ΄λ“

### κ¶μ¥ μ‚¬ν•­

1. **μ½”λ“ κ°€λ…μ„±**
   - μ½”λ“ μ—λ””ν„°μ ν°νΈ ν¬κΈ°λ¥Ό μ μ ν μ„¤μ • (12-14pt κ¶μ¥)
   - μ½”λ“ ν•μ΄λΌμ΄ν…μ΄ μ λ³΄μ΄λ„λ΅ μ„¤μ •
   - λ¶ν•„μ”ν• UI μ”μ†λ” μµμ†ν™”

2. **μ¤ν¬λ¦°μƒ· λ²”μ„**
   - κ° API ν•¨μμ μ „μ²΄ μ½”λ“λ¥Ό ν¬ν•¨
   - ν•¨μ μ‹κ·Έλ‹μ²λ¶€ν„° return λ¬ΈκΉμ§€ λ¨λ‘ ν¬ν•¨
   - μ¤‘μ”ν• λΉ„μ¦λ‹μ¤ λ΅μ§ λ¶€λ¶„μ€ ν™•λ€ν•μ—¬ λ³„λ„ μ¤ν¬λ¦°μƒ· μ¶”κ°€ κ°€λ¥

3. **λ³΄κ³ μ„ μ‘μ„± μ‹ ν¬ν•¨ν•  λ‚΄μ©**
   - API μ—”λ“ν¬μΈνΈ (HTTP λ©”μ„λ“ + κ²½λ΅)
   - API κΈ°λ¥ μ„¤λ…
   - μ£Όμ” νλΌλ―Έν„° λ° μ‘λ‹µ ν•μ‹
   - μ½”λ“ μ¤ν¬λ¦°μƒ·
   - κ°„λ‹¨ν• μ„¤λ… (μ½”λ“μ μ£Όμ” λ΅μ§)

4. **νμΌ κµ¬μ΅°**
   ```
   λ³΄κ³ μ„ κµ¬μ΅° μμ‹:
   
   3. λ°±μ—”λ“ API κµ¬ν„
   3.1 μΈμ¦ API
      3.1.1 μ΄λ©”μΌ μΈμ¦ μ”μ²­ API
        - μ—”λ“ν¬μΈνΈ: POST /api/auth/send-verification-email
        - κΈ°λ¥: ...
        - μ½”λ“: [μ¤ν¬λ¦°μƒ·]
        - μ„¤λ…: ...
      3.1.2 μ΄λ©”μΌ μΈμ¦ ν™•μΈ API
        ...
   3.2 λ€ν™” κ΄€λ¦¬ API
      ...
   ```

---

## π“ API μ”μ•½ν‘

| μΉ΄ν…κ³ λ¦¬ | API μ—”λ“ν¬μΈνΈ | HTTP λ©”μ„λ“ | μΈμ¦ ν•„μ” | νμΌ μ„μΉ |
|---------|--------------|------------|----------|----------|
| μΈμ¦ | `/api/auth/send-verification-email` | POST | β | `backend/api/auth.py` |
| μΈμ¦ | `/api/auth/verify-email` | POST | β | `backend/api/auth.py` |
| μΈμ¦ | `/api/auth/signup` | POST | β | `backend/api/auth.py` |
| μΈμ¦ | `/api/auth/login` | POST | β | `backend/api/auth.py` |
| μΈμ¦ | `/api/auth/password-reset/request` | POST | β | `backend/api/auth.py` |
| μΈμ¦ | `/api/auth/password-reset/confirm` | POST | β | `backend/api/auth.py` |
| μΈμ¦ | `/api/auth/refresh` | POST | β | `backend/api/auth.py` |
| λ€ν™” | `/api/conversations` | POST | β… | `backend/api/conversations.py` |
| λ€ν™” | `/api/conversations` | GET | β… | `backend/api/conversations.py` |
| λ€ν™” | `/api/conversations/{id}` | GET | β… | `backend/api/conversations.py` |
| λ€ν™” | `/api/conversations/{id}` | DELETE | β… | `backend/api/conversations.py` |
| λ€ν™” | `/api/conversations/{id}/messages` | GET | β… | `backend/api/conversations.py` |
| λ€ν™” | `/api/conversations/{id}/messages` | POST | β… | `backend/api/conversations.py` |
| λ€ν™” | `/api/conversations/chat` | POST | β… | `backend/api/conversations.py` |
| μ‹μ¤ν… | `/api/` | GET | β | `backend/main.py` |
| μ‹μ¤ν… | `/api/health` | GET | β | `backend/main.py` |
| μ‹μ¤ν… | `/api/metrics` | GET | β | `backend/main.py` |

### HyperCLOVA API ν΄λΌμ΄μ–ΈνΈ λ©”μ„λ“

| μΉ΄ν…κ³ λ¦¬ | λ©”μ„λ“λ… | μ„¤λ… | νμΌ μ„μΉ |
|---------|---------|------|----------|
| HyperCLOVA | `chat()` | κΈ°λ³Έ μ±„ν… API νΈμ¶ | `backend/domain/chat/client.py` |
| HyperCLOVA | `classify_intent()` | μλ„ λ¶„λ¥ (μμ—…/μΌμƒ) | `backend/domain/chat/client.py` |
| HyperCLOVA | `generate_answer()` | μ»¨ν…μ¤νΈ κΈ°λ° λ‹µλ³€ μƒμ„± | `backend/domain/chat/client.py` |
| HyperCLOVA | `generate_casual_answer()` | μΌμƒ λ€ν™” λ‹µλ³€ μƒμ„± | `backend/domain/chat/client.py` |
| HyperCLOVA | `get_hyperclova_client()` | ν΄λΌμ΄μ–ΈνΈ μ‹±κΈ€ν†¤ λ°ν™ | `backend/domain/chat/client.py` |

---

## π” μ¶”κ°€ μ°Έκ³ μ‚¬ν•­

### κΈ°μ  μ¤νƒ
- **μ›Ή ν”„λ μ„μ›ν¬**: FastAPI
- **λ°μ΄ν„°λ² μ΄μ¤**: MongoDB Atlas
- **μΈμ¦**: JWT (JSON Web Token)
- **λ²΅ν„° DB**: Pinecone
- **AI λ¨λΈ**: HyperCLOVA

### μ£Όμ” λΌμ΄λΈλ¬λ¦¬
- `fastapi`: μ›Ή ν”„λ μ„μ›ν¬
- `pymongo`: MongoDB ν΄λΌμ΄μ–ΈνΈ
- `bcrypt`: λΉ„λ°€λ²νΈ ν•΄μ‹±
- `python-jose`: JWT ν† ν° μ²λ¦¬
- `pinecone-client`: Pinecone λ²΅ν„° DB ν΄λΌμ΄μ–ΈνΈ
- `httpx`: λΉ„λ™κΈ° HTTP ν΄λΌμ΄μ–ΈνΈ (HyperCLOVA API νΈμ¶μ©)

### μ½”λ“ μ¤νƒ€μΌ
- Python 3.x κΈ°λ°
- λΉ„λ™κΈ° ν”„λ΅κ·Έλλ° (async/await)
- νƒ€μ… νν… μ‚¬μ©
- μƒμ„Έν• μ—λ¬ μ²λ¦¬ λ° λ΅κΉ…

---

## π“ λ³΄κ³ μ„ μ‘μ„± μ²΄ν¬λ¦¬μ¤νΈ

- [ ] κ° API μ—”λ“ν¬μΈνΈλ³„ μ½”λ“ μ¤ν¬λ¦°μƒ· μ΄¬μ μ™„λ£
- [ ] API μ—”λ“ν¬μΈνΈ λ° HTTP λ©”μ„λ“ λ…μ‹
- [ ] κ° APIμ κΈ°λ¥ μ„¤λ… μ‘μ„±
- [ ] μ£Όμ” νλΌλ―Έν„° λ° μ‘λ‹µ ν•μ‹ μ„¤λ…
- [ ] μ½”λ“μ μ£Όμ” λ΅μ§ μ„¤λ…
- [ ] μΈμ¦ ν•„μ” μ—¬λ¶€ λ…μ‹
- [ ] μ—λ¬ μ²λ¦¬ λ°©μ‹ μ„¤λ… (μ„ νƒμ‚¬ν•­)
- [ ] μ „μ²΄ API κµ¬μ΅°λ„ λλ” λ©λ΅ ν¬ν•¨ (μ„ νƒμ‚¬ν•­)
- [ ] HyperCLOVA API ν΄λΌμ΄μ–ΈνΈ λ©”μ„λ“ μ„¤λ… ν¬ν•¨

---

**μ‘μ„±μΌ**: 2024λ…„
**ν”„λ΅μ νΈ**: λ°±μ„λ€ν•™κµ μ±—λ΄‡ μ‹μ¤ν…
**λ©μ **: μΊ΅μ¤ν†¤ λ””μμΈ μµμΆ…λ³΄κ³ μ„ μ‘μ„±

